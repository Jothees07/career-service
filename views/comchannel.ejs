<%- include('partials/header') -%>

<!--Navigation Section-->
<div  class="nav-new">    
    <img id="head-icon" src="/images/Alpha-icon.png">
    <div id="header" style="transform: translateY(12px);">
        <a href="/home"><p class="head-span" >Home</p></a>
        <a href="/forum"><p class="head-span" >Forum</p></a>
        <a href="/community"><p class="head-span" id="activenav">Community</p></a>
        <a href="/contact"><p class="head-span">Contact</p></a>
    </div>

    <div class="btn-group btn-float-right">
        <button class="btn dropdown-toggle " type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            <img id="login-icon" src="/images/login.png">
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <li>
                <a class="dropdown-item dropdownProp" href="/profile" >
                    <i class="fa-regular fa-id-badge"></i> &nbsp;
                    Profile
                </a>
            </li>
          <li>
                <a class="dropdown-item dropdownProp" href="/signout">
                    <i class="fa-solid fa-right-from-bracket"></i>  &nbsp;
                    Sign out
                </a>
            </li>
        </ul>
      </div>
    
    
</div>
<br>



<div class="response-msg-div">
    <p></p>
</div>

<div class="com-outline">
    <div>
        <h2 class="com-head"> &emsp;<a href="/community"><i class="fa fa-arrow-left" aria-hidden="true"></i></a> &emsp;<%= data.channel %></h2>
    </div>
    <div id="com-message-sec" class="com-message-sec">
        
        <% data.messages.forEach(function(datum){ %>
            <% if(datum.username === user){ %>
                <div class="com-msg">
                    <div class="msg-outline msg-right-float">
                        <p><b>Me</b></p>
                        <p><%= datum.message %></p>
                    </div>
                </div>
            <% } else{ %>

                <div class="com-msg">
                    <div class="msg-outline">
                        <p><b><%= datum.username %></b></p>
                        <p><%= datum.message %></p>
                    </div>
                </div>
            <% } %>    

        <% }) %>
        

        
        
    </div>

    

    <div class="com-foot">
        <div class="com-msg-input">
            <form action="/community/send-msg" method="post">
                <input type="hidden" name="channelName" value="<%= data.channel %>">
                &nbsp;
                <a href="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
                    </svg>
                </a>
                <input type="text" name="msg" placeholder="Type your message" autocomplete="off">
                <a href="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder-symlink" viewBox="0 0 16 16">
                        <path d="m11.798 8.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"/>
                        <path d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm.694 2.09A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09l-.636 7a1 1 0 0 1-.996.91H2.826a1 1 0 0 1-.995-.91l-.637-7zM6.172 2a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"/>
                    </svg>
                </a>
                <button type="submit" class="com-msg-send">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>

</div>

<script>
    var messageSec = document.getElementById("com-message-sec");
    messageSec.scrollTop = messageSec.scrollHeight;
</script>



    <%- include('partials/footer') -%>  